![Lightning.Pub](https://github.com/shocknet/Lightning.Pub/raw/master/pub_logo.png)

![GitHub last commit](https://img.shields.io/github/last-commit/shocknet/Lightning.Pub?style=flat-square)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square)](http://makeapullrequest.com) 
[![Chat](https://img.shields.io/badge/chat-on%20Telegram-blue?style=flat-square)](https://t.me/ShockBTC)
![X (formerly Twitter) Follow](https://img.shields.io/twitter/follow/ShockBTC?style=flat-square&logo=bitcoin)


### Don't just run a Lightning Node, run a Lightning Pub.

"Pub" is a [Nostr](https://nostr.info/)-native account system, the goal of which is to make running Lightning infrastructure for your friends/family/customers easier than previously thought possible.

It may come as a surprise that the biggest hurdle to more Uncle Jim's nodes hasn't been with Bitcoin/Lightning node management itself, that's easily automated as illustrated by bad patterns like mobile nodes.

It's the legacy baggage of traditional web infrastructure, things like IP4, reverse proxies, DNS, Firewalls and SSL certificates, all which require a personal configuration that is a hurdle for most. The slow and unreliable nature Tor as proven to be a dead-end. Bolt12 is a re-implementation of Tor that is destined for the same fate.

Pub solves these network challenges with a Full and Nostr-native RPC. Being Nostr-native eliminates the complexity of legacy server configuration by using completely commoditized and trustless Nostr relays. Additionally, some optional services are integrated for backward compatibility with LNURL and Lightning Address.

By solving the networking and programability hurdles, Pub's provides a 3rd Lightning Layer that enables node-runners and Uncle Jim's to more easily bring their personal network into Bitcoin's permissionless economy. Pub does so while keeping the Lightning Network decentralized, and custodial scaling free of fiat rails, large banks, and other forms of high-time preference shitcoinery.

#### Features:

- Wrapper for [`LND`](https://github.com/lightningnetwork/lnd/releases) that can serve accounts over LNURL and NOSTR
- A growing number of [methods](https://github.com/shocknet/Lightning.Pub/blob/master/proto/autogenerated/client.md)
- Accounting SubLayers for Application Pools and Users 
    - A fee regime allows applications owners to monetize users, or node operators to host distinctly monetized applications.
    
![Accounts](https://github.com/shocknet/Lightning.Pub/raw/master/accounting_layers.png) 

#### Planned
- [ ] Management Dashboard is actively being integrated into [ShockWallet](https://github.com/shocknet/wallet2)
- [ ] Nostr native "offers"
- [ ] Automated Channel Management
- [ ] Bootstrap Peering (Passive "LSP")
- [ ] Subscriptions / Notifications
- [ ] Submarine Swaps
- [ ] High-Availabilty / Clustering

Dashboard Wireframe:

<img src="https://shockwallet.b-cdn.net/pub_home_ss.png" alt="Pub Dashboard" width="240">

#### ShockWallet and Lightning.Pub are free software. If you would like to see continued development, please show your [support](https://github.com/sponsors/shocknet) :)


> **WARNING:** While this software has been used in a high-profile production environment for over a year, it should still be considered bleeding edge. Special care has been taken to mitigate the risk of drainage attacks, which is a common risk to all Lightning API's. An integrated Watchdog service will terminate spends if it detects a discrepency between LND and the database, for this reason IT IS NOT RECOMMENDED TO USE PUB ALONGSIDE OTHER ACCOUNT SYSTEMS. While we give the utmost care and attention to security, the internet is an adversarial environment and SECURITY/RELIABILITY ARE NOT GUARANTEED- USE AT YOUR OWN RISK.

## Umbrel Installation

Coming Soon

## Automatic Installation

Coming Soon

## Manual CLI Installation

#### Notes:
* Use of a reverse proxy is only required if you wish to serve LNURLs
* The service defaults to port `8080`
* Requires [Node.js](https://nodejs.org) >=18.x

#### Steps:
1) Run [LND](https://github.com/lightningnetwork/lnd/releases) - *Example mainnet startup*:

 ```
 ./lnd --bitcoin.active --bitcoin.mainnet --bitcoin.node=neutrino --neutrino.addpeer=neutrino.shock.network --feeurl=https://nodes.lightning.computer/fees/v1/btc-fee-estimates.json
 ```


2) Download and Install Lightning.Pub

```
git clone https://github.com/shocknet/Lightning.Pub
cd Lightning.Pub && npm i
```

3) `cp env.example .env`

4) Configure values to env file as desired

5) `npm start`

A default "wallet" application pool will be automatically created, if you wish to create other app pools:

```
curl -XPOST -H 'Authorization: Bearer defined_in_constants.ts' -H "Content-type: application/json" -d '{"name":"ExampleApplicationPoolName"}' 'http://localhost:8080/api/admin/app/add'
```

7) Connect with [wallet2](https://github.com/shocknet/wallet2) using the wallet nprofile that was logged at startup.


