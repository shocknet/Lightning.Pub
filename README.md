![Lightning.Pub](https://github.com/shocknet/Lightning.Pub/raw/master/pub_logo.png)

![GitHub last commit](https://img.shields.io/github/last-commit/shocknet/Lightning.Pub?style=flat-square)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square)](http://makeapullrequest.com) 
[![Chat](https://img.shields.io/badge/chat-on%20Telegram-blue?style=flat-square)](https://t.me/ShockBTC)
![X (formerly Twitter) Follow](https://img.shields.io/twitter/follow/ShockBTC?style=flat-square&logo=bitcoin)


### Don't just run a Lightning Node, run a Lightning Pub.

"Pub" is a `nostr` native account system that makes connecting your node to apps and websites super easy. 

Using Nostr relays as transport for encrypted RPCs, Pub eliminates the complexity of WebServer and SSL configurations.

By solving the networking and programability hurdles, Pub enables node-runners and Uncle Jim's to bring their Friends, Family and Customers into Bitcoin's permissionless circular economy. All while keeping the Lightning Network decentralized, and custodial scaling free of fiat shitcoin rails and large banks. 

#### Features:

- Wrapper for [`LND`](https://github.com/lightningnetwork/lnd/releases) that can serve accounts over LNURL and NOSTR
- A growing number of [methods](https://github.com/shocknet/Lightning.Pub/blob/master/proto/autogenerated/client.md)
- Accounting SubLayers for Application Pools and Users 
    - A fee regime allows applications owners to monetize users, or node operators to host distinctly monetized applications.
    
![Accounts](https://github.com/shocknet/Lightning.Pub/raw/master/accounting_layers.png) 

#### Planned
- [ ] Management Dashboard is being integrated into [ShockWallet](https://github.com/shocknet/wallet2) 
- [ ] Nostr native "offers"
- [ ] Channel Automation
- [ ] Bootstarp Peering (Passive "LSP")
- [ ] Subscriptions / Notifications
- [ ] Submarine Swaps
- [ ] High-Availabilty / Clustering

Dashboard:

<img src="https://shockwallet.b-cdn.net/pub_home_ss.png" alt="Pub Dashboard" width="240">

#### ShockWallet and Lightning.Pub are free software. If you would like to see continued development, please show your [support](https://github.com/sponsors/shocknet) :)


> **WARNING:** While this software has been used in production for many months, it is still bleeding edge and security or reliabilty is not guaranteed.

## Manual Installation

#### Notes:
* The service defaults to port `8080` 
* Use of a reverse proxy is only required if you wish to serve LNURLs
* Requires [Node.js](https://nodejs.org) >=18.x

#### Steps:
1) Run [LND](https://github.com/lightningnetwork/lnd/releases) - *Example mainnet startup*:

 ```
 ./lnd --bitcoin.active --bitcoin.mainnet --bitcoin.node=neutrino --neutrino.connect=neutrino.shock.network --routing.assumechanvalid --accept-keysend --allow-circular-route --feeurl=https://nodes.lightning.computer/fees/v1/btc-fee-estimates.json
 ```


2) Download and Install Lightning.Pub

```
git clone https://github.com/shocknet/Lightning.Pub
cd Lightning.Pub && npm i
```

3) `cp env.example .env`

4) Add values to env file 

5) `npm start`

6) Create an Application Pool 

A default "wallet" pool will be automatically created and keys generated automatically, if you wish to create something other:

```
curl -XPOST -H 'Authorization: Bearer defined_in_constants.ts' -H "Content-type: application/json" -d '{"name":"ExampleApplicationPoolName"}' 'http://localhost:8080/api/admin/app/add'
```

7) Connect with [wallet2](https://github.com/shocknet/wallet2) using the npub response in step 6 or the the wallet application nprofile logged at startup.


