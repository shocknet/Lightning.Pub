![Lightning.Pub](https://github.com/shocknet/Lightning.Pub/raw/master/pub_logo.png)

![GitHub last commit](https://img.shields.io/github/last-commit/shocknet/Lightning.Pub?style=flat-square)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square)](http://makeapullrequest.com) 
[![Chat](https://img.shields.io/badge/chat-on%20Telegram-blue?style=flat-square)](https://t.me/ShockBTC)
![X (formerly Twitter) Follow](https://img.shields.io/twitter/follow/ShockBTC?style=flat-square&logo=bitcoin)


### Don't just run a Lightning Node, run a Lightning Pub.

`Pub` enables your Lightning node with public API's and accounts over `nostr`, allowing LN nodes to act like a webserver without the complexity of networking and SSL configurations. 

The Permissionless WebApps that use these API's promote a more decentralized Lightning Network, by removing hurdles for self-custodial home nodes to power connections from Friends, Family and Customers. 

#### Features:

- Wrapper for [`LND`](https://github.com/lightningnetwork/lnd/releases) that can serve accounts over LNURL and NOSTR
- A growing number of [methods](https://github.com/shocknet/Lightning.Pub/blob/master/proto/autogenerated/client.md)
- Accounting SubLayers for Application Pools and Users 
    - A fee regime allows applications owners to tax users, or node operators to tax applications.
    
![Accounts](https://github.com/shocknet/Lightning.Pub/raw/master/accounting_layers.png) 

#### Planned
- [ ] Management Dashboard is being integrated into [ShockWallet](https://github.com/shocknet/wallet2) 
- [ ] Channel Automation
- [ ] Subscriptions / Notifications
- [ ] Submarine Swaps
- [ ] High-Availabilty

Dashboard:

<img src="https://shockwallet.b-cdn.net/pub_home_ss.png" alt="Pub Dashboard" width="240">

#### ShockWallet and most of Lightning.Pub were developed as part of the [Bolt.Fun hackathon](https://bolt.fun/project/shocknet). If you would like to see continued development, please show your support there and help us win :)

#### See the original NostrHack presentation: https://lightning.video/f0f64fa1fc3744fb6a3880e2bd8f6a254ceb3caee112d9708271f2d6a09a2f00


> **WARNING:** This repository is under rapid iteration and security is not guaranteed. Use tagged releases for non-development.

## Manual Installation

#### Notes:
* The service defaults to port `8080` 
* Use of a reverse proxy is only required if you wish to serve LNURLs
* Requires [Node.js](https://nodejs.org) >=18.x

#### Steps:
1) Run [LND](https://github.com/lightningnetwork/lnd/releases) - *Example mainnet startup*:

 ```
 ./lnd --bitcoin.active --bitcoin.mainnet --bitcoin.node=neutrino --neutrino.connect=neutrino.shock.network --routing.assumechanvalid --accept-keysend --allow-circular-route --feeurl=https://nodes.lightning.computer/fees/v1/btc-fee-estimates.json
 ```


2) Download and Install Lightning.Pub

```
git clone https://github.com/shocknet/Lightning.Pub
cd Lightning.Pub && npm i
```

3) `cp env.example .env`

4) Add values to env file 
    - You can generate a keypair with `node genkey.js` 

5) `npm start`

6) Create an Application Pool

```
curl -XPOST -H 'Authorization: Bearer defined_in_constants.ts' -H "Content-type: application/json" -d '{"name":"ExampleApplicationPoolName"}' 'http://localhost:8080/api/admin/app/add'
```

7) Connect with [wallet2](https://github.com/shocknet/wallet2) using the npub response in step 6.


