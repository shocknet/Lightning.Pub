<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" />
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/wizard.css" />
  <link rel="stylesheet" href="css/liquidity.css" />
  <link rel="stylesheet" href="css/backup.css" />
  <link rel="stylesheet" href="css/connect.css" />
  <link rel="stylesheet" href="css/status.css" />
  <!-- HTML Meta Tags -->
  <title>Lightning.Pub</title>
  <meta name="description" content="Lightning for Everyone" />
  <link rel="icon" type="image/png" href="img/pub_logo.png" />
</head>

<body>
  <header>
    <img src="img/pub_logo.png" width="38px" height="auto" alt="Lightning Pub logo" />
    <img src="img/LightningPub.png" height="26px" alt="Lightning Pub logo" />
  </header>

  <main class="wizard">
    <section id="page-node">
      <div class="setup-header">
        <h2>Setup your Pub</h2>
      </div>

      <!-- Progress Indicator -->
      <div class="progress-indicator">
        <div class="progress-line">
          <div class="progress-line-fill"></div>
        </div>
        <div class="progress-steps">
          <div class="progress-step">
            <div class="progress-step-circle step-1-circle" data-step="1">1</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-2-circle" data-step="2">2</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-3-circle" data-step="3">3</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-4-circle" data-step="4">4</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-5-circle" data-step="5">5</div>
          </div>
        </div>
      </div>

      <div class="setup-description">
        <p class="header-title">
          Lightning.Pub is a lightweight bitcoin node that is easily installable (as you have seen) and manageable. It aims to make it easy to run an Uncle Jim's bank for your family, friends, community and business. It aims to be the tool for sovereign individuals to find economic freedom.
        </p>
      </div>

      <div class="setup-content">
        <div class="input-group">
          <span>Set up your new public node, start by giving it a name:</span>
          <input type="text" placeholder="Uncle Jim's Pub" value="" id="nodeName" />
        </div>

        <div class="input-group">
          <span>Add an image to identify your Pub among others:</span>
          <div class="avatar-input-group">
            <input type="text" placeholder="https://lightning.pub/favicon.png" id="avatarUrl" />
            <img id="avatarPreview" src="img/pub_logo.png" alt="avatar" />
          </div>
        </div>

        <div class="error-message" id="errorText"></div>

        <button class="wizard-cta" id="relayBtn">
          Next
        </button>
      </div>
    </section>

    <section id="page-relay" style="display: none;">
      <div class="setup-header">
        <button class="icon-button back-button" id="back-to-node">
          <img src="img/back.svg" alt="" />
        </button>
        <h2>Nostr Relay</h2>
      </div>

      <!-- Progress Indicator -->
      <div class="progress-indicator">
        <div class="progress-line">
          <div class="progress-line-fill"></div>
        </div>
        <div class="progress-steps">
          <div class="progress-step">
            <div class="progress-step-circle step-1-circle" data-step="1">1</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-2-circle" data-step="2">2</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-3-circle" data-step="3">3</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-4-circle" data-step="4">4</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-5-circle" data-step="5">5</div>
          </div>
        </div>
      </div>

      <div class="setup-description">
        <p class="header-title">
          A Nostr relay is in charge to transmit and receive all transactions from and to your Lightning node. We provide our relay by default, and you can change it later if you prefer setup a different one.
        </p>
      </div>

      <div class="setup-content">
        <div class="input-group">
          <input type="text" placeholder="wss://relay.lightning.pub" value="wss://relay.lightning.pub" id="relayUrl" />
        </div>

        <div class="relay-support-toggle">
          <div class="toggle-label">
            <span>Support LN.pub relay infrastructure costs</span>
            <span class="toggle-amount">1000 sats/month</span>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="relaySupportToggle" checked />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="error-message" id="errorTextRelay"></div>

        <button class="wizard-cta" id="liquidityBtn">
          Next
        </button>
      </div>
    </section>

    <section id="page-liquidity" style="display: none;">
      <div class="setup-header">
        <button class="icon-button back-button" id="back-to-relay">
          <img src="img/back.svg" alt="" />
        </button>
        <h2>Manage Node Liquidity</h2>
      </div>

      <!-- Progress Indicator -->
      <div class="progress-indicator">
        <div class="progress-line">
          <div class="progress-line-fill"></div>
        </div>
        <div class="progress-steps">
          <div class="progress-step">
            <div class="progress-step-circle step-1-circle" data-step="1">1</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-2-circle" data-step="2">2</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-3-circle" data-step="3">3</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-4-circle" data-step="4">4</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-5-circle" data-step="5">5</div>
          </div>
        </div>
      </div>

      <div class="setup-description">
        <p class="header-title">
          How do you want to manage Lightning channels?
        </p>
      </div>

      <div class="setup-content">
        <div class="radio-option">
          <input type="radio" id="automate" name="service" />
          <label for="automate" class="automate">
            Use automation service
            <div class="question-box">
              <button class="icon-button" id="show-question-liquidity">
                <img src="img/question.svg" />
              </button>
            </div>
            <div class="question-content" id="question-content">
              Automation helps reduce the fees you pay by trusting peers temporarily, until your node balance is sufficient to open a balanced Lightning channel.
              <button class="icon-button close-button" id="close-question">
                <img src="img/close.svg" alt="" />
              </button>
              <a href="https://docs.shock.network/" target="_blank" class="marked question-more">Learn more.</a>
            </div>
          </label>
        </div>
        <div class="radio-option">
          <input type="radio" id="manual" name="service" />
          <label for="manual">Manage my channels manually</label>
        </div>
        <div class="error-message" id="errorTextLiquidity"></div>
        <button class="wizard-cta" id="backupBtn">
          Next
        </button>
      </div>
    </section>

    <section id="page-backup" style="display: none;">
      <div class="setup-header">
        <button class="icon-button back-button" id="back-to-liquidity">
          <img src="img/back.svg" alt="" />
        </button>
        <h2>Choose a Recovery Method</h2>
      </div>

      <!-- Progress Indicator -->
      <div class="progress-indicator">
        <div class="progress-line">
          <div class="progress-line-fill"></div>
        </div>
        <div class="progress-steps">
          <div class="progress-step">
            <div class="progress-step-circle step-1-circle" data-step="1">1</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-2-circle" data-step="2">2</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-3-circle" data-step="3">3</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-4-circle" data-step="4">4</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-5-circle" data-step="5">5</div>
          </div>
        </div>
      </div>

      <div class="setup-description">
        <p class="header-title">
          <span class="bold">New Node! ðŸŽ‰</span> It's important to backup your keys.
        </p>
      </div>

      <div class="setup-content">
        <div class="description-box">
          <p class="description">
            In addition to your seed phrase, you also need channel details to recover funds should your node experience a hardware failure.
          </p>
          <p class="description">
            It's important always to have the latest version of this file. Fortunately, it's small enough to automatically store on the Nostr relay.
          </p>
        </div>
        <div class="warning-text">
          If you did not choose the developers relay, be sure your relay has adequate storage policies to hold NIP78 events.
        </div>
        <div class="radio-option">
          <input type="radio" id="backup" name="backup-option" />
          <label for="backup">Encrypted Backup to Nostr Relay</label>
        </div>
        <div class="radio-option">
          <input type="radio" id="manual-backup" name="backup-option" />
          <label for="manual-backup">DO NOT store on relay (Manual Backups)</label>
        </div>
        <div class="error-message" id="errorTextBackup"></div>
        <button class="wizard-cta" id="next-button">
          Finish Setup
        </button>
      </div>
    </section>

    <section id="page-connect" style="display: none;">
      <div class="setup-header">
        <button class="icon-button back-button" id="back-to-backup">
          <img src="img/back.svg" alt="" />
        </button>
        <h2>Connect</h2>
      </div>

      <!-- Progress Indicator -->
      <div class="progress-indicator">
        <div class="progress-line">
          <div class="progress-line-fill"></div>
        </div>
        <div class="progress-steps">
          <div class="progress-step">
            <div class="progress-step-circle step-1-circle" data-step="1">1</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-2-circle" data-step="2">2</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-3-circle" data-step="3">3</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-4-circle" data-step="4">4</div>
          </div>
          <div class="progress-step">
            <div class="progress-step-circle step-5-circle" data-step="5">5</div>
          </div>
        </div>
      </div>

      <div class="setup-description">
        <p class="header-title">You can now manage your node remotely</p>
      </div>

      <div class="setup-content">
        <p class="connect-instructions">Scan the QR or Copy-Paste the string to establish the connection.</p>
        <div class="qrcode-container">
          <div class="qrcode-box" id="codebox" aria-label="Pairing QR and string">
            <div class="qrcode-header">
              <p class="qrcode-warning">Code contains a one-time pairing secret</p>
              <p class="qrcode-reveal-hint" id="click-text">Click to reveal</p>
            </div>
            <div class="qrcode-viewport">
              <div id="qrcode"></div>
              <div class="qr-veil"><span>Click to reveal</span></div>
            </div>
            <div class="qrcode-string">
              <div id="connectString"></div>
            </div>
          </div>
        </div>
        <button class="wizard-cta wizard-cta--wide" id="to-status">OK, I've connected my wallet</button>
      </div>
    </section>

    <section id="page-status" style="display: none;">
      <div class="setup-header">
        <h2 class="status-title">Node Status</h2>
      </div>
      <div class="status-line"></div>
      <section class="node-status">
        <p id="statusErrorText" style="color:red"></p>
        <div class="status-content">
          <div class="status-row">
            <div class="status-label">Public node name:</div>
            <div class="status-value-group">
              <div class="status-value-wrapper">
                <div class="show-nodey" style="display: none;">
                  <input type="text" value="" name="show-nodey" placeholder="" />
                  <div style="display: flex;justify-content: end; gap: 8px; margin-top: 8px;">
                    <button class="small-btn" id="cancel-show-nodey">Cancel</button>
                    <button class="small-btn" id="save-show-nodey">Save</button>
                  </div>
                </div>
                <div class="status-value-container">
                  <button class="status-icon-button" id="show-nodey">
                    <img src="img/pencil.svg" alt="edit" />
                  </button>
                  <span id="show-nodey-text" class="status-value">Nodey McNodeFace</span>
                  <button class="status-icon-button status-copy-btn" data-copy-target="show-nodey-text">
                    <img src="img/copy.svg" alt="copy" />
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="status-row">
            <div class="status-label">Node avatar:</div>
            <div class="status-value-group">
              <div class="status-value-wrapper">
                <div class="show-avatar" style="display: none;">
                  <input type="text" value="" name="show-avatar" placeholder="" />
                  <div style="display: flex;justify-content: end; gap: 8px; margin-top: 8px;">
                    <button class="small-btn" id="cancel-show-avatar">Cancel</button>
                    <button class="small-btn" id="save-show-avatar">Save</button>
                  </div>
                </div>
                <div class="status-value-container" id="avatar-display-container">
                  <button class="status-icon-button" id="show-avatar">
                    <img src="img/pencil.svg" alt="edit" />
                  </button>
                  <span id="avatar-url-text" class="status-value">https://lightning.pub/favicon.png</span>
                  <img id="avatarImg" src="" alt="avatar" class="avatar-image" />
                  <button class="status-icon-button status-copy-btn" data-copy-target="avatar-url-text">
                    <img src="img/copy.svg" alt="copy" />
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="status-row">
            <div class="status-label">Nostr relay:</div>
            <div class="status-value-group">
              <div class="status-value-wrapper">
                <div class="show-nostr" style="display: none;">
                  <input type="text" value="" name="show-nostr" placeholder="wss://relay.lightning.pub" />
                  <div style="display: flex;justify-content: end; gap: 8px; margin-top: 8px;">
                    <button class="small-btn" id="cancel-show-nostr">Cancel</button>
                    <button class="small-btn" id="save-show-nostr">Save</button>
                  </div>
                </div>
                <div class="status-value-container">
                  <button class="status-icon-button" id="show-nostr">
                    <img src="img/pencil.svg" alt="edit" />
                  </button>
                  <span id="show-nostr-text" class="status-value">wss://relay.lightning.pub</span>
                  <button class="status-icon-button status-copy-btn" data-copy-target="show-nostr-text">
                    <img src="img/copy.svg" alt="copy" />
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="status-row">
            <div class="status-label">Relay Status:</div>
            <div class="status-value-group">
              <div class="status-value-container">
                <span id="relayStatus" class="status-value">Connected</span>
                <span class="status-dot status-dot-green"></span>
              </div>
            </div>
          </div>
          <div class="status-row">
            <div class="status-label">Admin npub:</div>
            <div class="status-value-group">
              <div class="status-value-container">
                <span id="adminNpub" class="status-value">#</span>
                <button class="status-icon-button status-copy-btn" data-copy-target="adminNpub">
                  <img src="img/copy.svg" alt="copy" />
                </button>
              </div>
            </div>
          </div>
          <div class="status-row">
            <div class="status-label">Invite link:</div>
            <div class="status-value-group">
              <div class="status-value-container">
                <a href="#" target="_blank" id="inviteLinkHttp" class="status-value status-link">#</a>
                <button class="status-icon-button status-copy-btn" data-copy-target="inviteLinkHttp">
                  <img src="img/copy.svg" alt="copy" />
                </button>
              </div>
            </div>
          </div>
          <div class="status-row">
            <div class="status-label">Lightning status:</div>
            <div class="status-value-group">
              <div class="status-value-container">
                <span id="lndStatus" class="status-value">Online</span>
                <span class="status-dot status-dot-orange"></span>
              </div>
            </div>
          </div>
          <div class="status-row">
            <div class="status-label">Watchdog status:</div>
            <div class="status-value-group">
              <div class="status-value-container">
                <span id="watchdog-status" class="status-value">Ok</span>
                <span class="status-dot status-dot-green"></span>
              </div>
            </div>
          </div>
        </div>
        <div style="margin-top: 30px; display: flex; justify-content: center;">
          <button class="wizard-cta" id="edit-settings">Edit</button>
        </div>
        <div id="reset-box">
          <div style="width: 100%;height: 100%;position: relative;">
            <button class="icon-button close-button" id="close-reset-box">
              <img src="img/close.svg" alt="">
            </button>
            <div class="reset-box-content" id="reset-content"></div>
            <div class="continue-button-container">
              <div class="continue-button" id="">Continue</div>
            </div>
          </div>
        </div>
      </section>
    </section>
  </main>

  <footer>
    <div class="footer-text">
      <div>By proceeding you acknowledge that this is</div>
      <div>bleeding-edge software, and agree to the providers</div>
      <div>
        <span style="color: #c434e0">terms</span> regarding any services
        herein.
      </div>
    </div>
    <div class="line"></div>
    <a href="https://docs.shock.network" class="marked need-help">Need Help?</a>
  </footer>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
  <script src="js/wizard.js"></script>
</body>

</html>